<main th:fragment="mainContentLessonVideo">
    <!-- =======================
    Page banner video START -->

    <div class="row px-6">
        <div class="row ">

            <!-- Course video START -->
            <div class="col-lg-9">
                <div class="video-player rounded-3">
                    <video controls crossorigin="anonymous" playsinline poster="/assets/images/videos/poster.jpg">
                        <source th:src="${currentLesson.video.videoUrl}" size="360">
                        <source th:src="${currentLesson.video.videoUrl}" size="720">
                        <source th:src="${currentLesson.video.videoUrl}" size="1080">
                        <!-- Caption files -->
                        <track kind="captions" label="English" srclang="en" src="/assets/images/videos/en.vtt" default>
                        <track kind="captions" label="French" srclang="fr" src="/assets/images/videos/fr.vtt">
                    </video>
                </div>


                <div class="row">

                    <!-- Main content START -->
                    <div class="col mt-3">
                        <div class="row">

                            <!-- Course title START -->
                            <div class="col-12">
                                <!-- Title -->
                                <h1 th:text="${currentLesson.title}">The Complete Digital Marketing Course - 12 Courses
                                    in
                                    1</h1>

                            </div>
                            <!-- Course title END -->

                            <!-- Instructor detail START -->
                            <div class="col-12">
                                <div class="d-sm-flex justify-content-sm-between align-items-center">
                                    <!-- Avatar detail -->
                                    <div class="d-flex align-items-center">
                                        <!-- Avatar image -->
                                        <div class="avatar avatar-lg">
                                            <img class="avatar-img rounded-circle" src="/assets/images/avatar/05.jpg"
                                                alt="avatar">
                                        </div>
                                        <div class="ms-3">
                                            <h6 class="mb-0"><a href="#" th:text="${course.instructor.fullName}">By
                                                    Jacqueline Miller</a></h6>
                                            <p class="mb-0 small" th:text="${course.instructor.personalSkill}">Founder
                                                Eduport company</p>
                                        </div>
                                    </div>


                                </div>
                            </div>
                            <!-- Instructor detail END -->

                            <!-- Course detail START -->
                            <div class="col-12">
                                <!-- Tabs START -->
                                <ul class="nav nav-pills nav-pills-bg-soft px-3" id="course-pills-tab" role="tablist">
                                    <!-- Tab item -->
                                    <li class="nav-item me-2 me-sm-4" role="presentation">
                                        <button class="nav-link mb-0 active" id="course-pills-tab-4"
                                            data-bs-toggle="pill" data-bs-target="#course-pills-4" type="button"
                                            role="tab" aria-controls="course-pills-4" aria-selected="true">Comment
                                        </button>
                                    </li>
                                </ul>
                                <!-- Tabs END -->

                                <!-- Tab contents START -->
                                <div class="tab-content pt-4 px-3" id="course-pills-tabContent">
                                    <!-- Content START -->
                                    <div class="tab-pane fade show active" id="course-pills-4" role="tabpanel"
                                        aria-labelledby="course-pills-tab-4">
                                        <!-- Review START -->
                                        <div class="row mb-4">
                                            <div class="col-12">
                                                <h5 class="mb-4">Ask Your Question</h5>

                                                <!-- Comment Form -->
                                                <div class="d-flex mb-4" th:if="${user != null}">
                                                    <div class="avatar avatar-sm flex-shrink-0 me-2">
                                                        <img class="avatar-img rounded-circle"
                                                             th:src="${user != null and user.profilePicture != null and user.profilePicture != ''} ? ${user.profilePicture} : @{/assets/images/avatar/default.jpg}"
                                                             th:alt="${user != null ? user.fullName : 'User'}">
                                                    </div>
                                                    <form id="commentForm" class="w-100 d-flex">
                                                        <input type="hidden" name="courseId" th:value="${course.courseId}" />
                                                        <div class="flex-grow-1 me-2">
                                                            <textarea class="form-control pe-4 bg-light" name="comment" rows="1"
                                                                      placeholder="Add a comment..." required></textarea>
                                                        </div>
                                                        <button class="btn btn-primary mb-0" type="submit">Post</button>
                                                    </form>
                                                </div>

                                                <!-- Comment Message -->
                                                <div id="commentMessage"></div>

                                                <!-- Comment item START -->
                                                <div th:each="comment : ${comments}" class="border p-2 p-sm-4 rounded-3 mb-4">
                                                    <ul class="list-unstyled mb-0">
                                                        <li class="comment-item">
                                                            <div class="d-flex mb-3">
                                                                <!-- Avatar -->
                                                                <div class="avatar avatar-sm flex-shrink-0">
                                                                    <a href="#"><img class="avatar-img rounded-circle"
                                                                            th:src="${comment.user != null and comment.user.profilePicture != null and comment.user.profilePicture != ''} ? ${comment.user.profilePicture} : @{/assets/images/avatar/default.jpg}"
                                                                            th:alt="${comment.user != null ? comment.user.fullName : 'User'}"></a>
                                                                </div>
                                                                <div class="ms-2">
                                                                    <!-- Comment by -->
                                                                    <div class="bg-light p-3 rounded">
                                                                        <div class="d-flex justify-content-between">
                                                                            <div class="me-2">
                                                                                <h6 class="mb-1 lead fw-bold"><a
                                                                                        href="#!">
                                                                                        <span th:text="${comment.user != null ? comment.user.fullName : 'Unknown User'}"></span>
                                                                                    </a></h6>
                                                                                <p class="h6 mb-0" th:text="${comment.comment}"></p>
                                                                            </div>
                                                                            <small th:text="${#temporals.format(comment.createdAt, 'dd/MM/yyyy HH:mm')}">5hr</small>
                                                                        </div>
                                                                    </div>
                                                                    <!-- Comment react -->
                                                                    <ul class="nav nav-divider py-2 small">
                                                                        <li class="nav-item">
                                                                            <a class="text-primary-hover" href="#" 
                                                                               th:onclick="'replyToComment(' + ${comment.reviewId} + ')'">
                                                                                Reply
                                                                            </a>
                                                                        </li>
                                                                        <li class="nav-item" th:if="${user != null and comment.user != null and user.userId == comment.user.userId}">
                                                                            <a class="text-primary-hover" href="#" 
                                                                               th:onclick="'editComment(' + ${comment.reviewId} + ')'">
                                                                                Edit
                                                                            </a>
                                                                        </li>
                                                                        <li class="nav-item" th:if="${user != null and comment.user != null and user.userId == comment.user.userId}">
                                                                            <a class="text-danger-hover" href="#" 
                                                                               th:onclick="'deleteComment(' + ${comment.reviewId} + ')'">
                                                                                Delete
                                                                            </a>
                                                                        </li>
                                                                        <li class="nav-item" th:if="${user != null and (comment.user == null or user.userId != comment.user.userId)}">
                                                                            <a class="text-warning-hover" href="#" 
                                                                               th:onclick="'reportComment(' + ${comment.reviewId} + ')'">
                                                                                Report
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>

                                                            <!-- Reply form (hidden by default) -->
                                                            <div th:id="'replyForm' + ${comment.reviewId}" class="ms-4 mb-3" style="display: none;">
                                                                <form th:class="'replyCommentForm'" th:data-parent-id="${comment.reviewId}">
                                                                    <input type="hidden" name="courseId" th:value="${course.courseId}" />
                                                                    <input type="hidden" name="parentId" th:value="${comment.reviewId}" />
                                                                    <div class="d-flex">
                                                                        <textarea class="form-control me-2" name="comment" rows="1"
                                                                                  placeholder="Write a reply..." required></textarea>
                                                                        <button class="btn btn-primary btn-sm" type="submit">Reply</button>
                                                                        <button class="btn btn-secondary btn-sm ms-2" type="button" 
                                                                                th:onclick="'cancelReply(' + ${comment.reviewId} + ')'">Cancel</button>
                                                                    </div>
                                                                </form>
                                                            </div>

                                                            <!-- Edit form (hidden by default) -->
                                                            <div th:id="'editForm' + ${comment.reviewId}" class="ms-4 mb-3" style="display: none;">
                                                                <form th:class="'editCommentForm'" th:data-comment-id="${comment.reviewId}">
                                                                    <input type="hidden" name="courseId" th:value="${course.courseId}" />
                                                                    <div class="d-flex">
                                                                        <textarea class="form-control me-2" name="comment" rows="1"
                                                                                  th:text="${comment.comment}" required></textarea>
                                                                        <button class="btn btn-primary btn-sm" type="submit">Update</button>
                                                                        <button class="btn btn-secondary btn-sm ms-2" type="button" 
                                                                                th:onclick="'cancelEdit(' + ${comment.reviewId} + ')'">Cancel</button>
                                                                    </div>
                                                                </form>
                                                            </div>

                                                            <!-- Comment item nested START -->
                                                            <ul class="list-unstyled ms-4" th:if="${comment.children != null and comment.children.size() > 0}">
                                                                <!-- Comment item START -->
                                                                <li class="comment-item" th:each="reply : ${comment.children}">
                                                                    <div class="d-flex">
                                                                        <!-- Avatar -->
                                                                        <div class="avatar avatar-xs flex-shrink-0">
                                                                            <a href="#"><img
                                                                                    class="avatar-img rounded-circle"
                                                                                    th:src="${reply.user != null and reply.user.profilePicture != null and reply.user.profilePicture != ''} ? ${reply.user.profilePicture} : @{/assets/images/avatar/default.jpg}"
                                                                                    th:alt="${reply.user != null ? reply.user.fullName : 'User'}"></a>
                                                                        </div>
                                                                        <!-- Comment by -->
                                                                        <div class="ms-2">
                                                                            <div class="bg-light p-3 rounded">
                                                                                <div class="d-flex justify-content-between">
                                                                                    <div class="me-2">
                                                                                        <h6 class="mb-1 lead fw-bold">
                                                                                            <a href="#" th:text="${reply.user != null ? reply.user.fullName : 'Unknown User'}"></a>
                                                                                        </h6>
                                                                                        <p class="mb-0" th:text="${reply.comment}"></p>
                                                                                    </div>
                                                                                    <small th:text="${#temporals.format(reply.createdAt, 'dd/MM/yyyy HH:mm')}">2hr</small>
                                                                                </div>
                                                                            </div>
                                                                            <!-- Comment react -->
                                                                            <ul class="nav nav-divider py-2 small">
                                                                                <li class="nav-item" th:if="${user != null and reply.user != null and user.userId == reply.user.userId}">
                                                                                    <a class="text-primary-hover" href="#" 
                                                                                       th:onclick="'editReply(' + ${reply.reviewId} + ')'">
                                                                                        Edit
                                                                                    </a>
                                                                                </li>
                                                                                <li class="nav-item" th:if="${user != null and reply.user != null and user.userId == reply.user.userId}">
                                                                                    <a class="text-danger-hover" href="#" 
                                                                                       th:onclick="'deleteComment(' + ${reply.reviewId} + ')'">
                                                                                        Delete
                                                                                    </a>
                                                                                </li>
                                                                                <li class="nav-item" th:if="${user != null and (reply.user == null or user.userId != reply.user.userId)}">
                                                                                    <a class="text-warning-hover" href="#" 
                                                                                       th:onclick="'reportComment(' + ${reply.reviewId} + ')'">
                                                                                        Report
                                                                                    </a>
                                                                                </li>
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                </li>
                                                                <!-- Comment item END -->
                                                            </ul>
                                                            <!-- Comment item nested END -->
                                                        </li>
                                                    </ul>
                                                </div>
                                                <!-- Comment item END -->

                                            </div>

                                        </div>
                                    </div>
                                    <!-- Content END -->
                                </div>
                                <!-- Tab contents END -->
                            </div>
                            <!-- Course detail END -->
                        </div>
                    </div>
                    <!-- Main content END -->



                </div><!-- Row END -->
            </div>
            <!-- Course video END -->

            <!-- Right sidebar START -->
            <div class="col-lg-3">
                <!-- Responsive offcanvas body START -->
                <div class="offcanvas-lg offcanvas-end" tabindex="-1" id="offcanvasSidebar"
                    aria-labelledby="offcanvasSidebarLabel">
                    <div class="offcanvas-header bg-dark">
                        <h5 class="offcanvas-title text-white" id="offcanvasSidebarLabel">Course playlist</h5>
                        <button type="button" class="btn btn-sm btn-light mb-0" data-bs-dismiss="offcanvas"
                            data-bs-target="#offcanvasSidebar" aria-label="Close"><i class="bi bi-x-lg"></i>
                        </button>
                    </div>
                    <div class="offcanvas-body p-3 p-lg-0">
                        <div class="col-12">
                            <!-- Accordion START -->
                            <div class="accordion accordion-icon accordion-bg-light" id="accordionExample2">
                                <!-- Item -->
                                <div class="accordion-item mb-3" th:each="chapter, interStat : ${chapters}">
                                    <h6 class="accordion-header font-base" th:id="'heading-' + ${interStat.index}">
                                        <a class="accordion-button fw-bold rounded collapsed d-block"
                                            th:href="'#collapse-' + ${interStat.index}" data-bs-toggle="collapse"
                                            th:data-bs-target="'#collapse-' + ${interStat.index}" aria-expanded="false"
                                            th:aria-controls="'collapse-' + ${interStat.index}">
                                            <span class="mb-0" th:text="${chapter.title}">Introduction of Digital
                                                Marketing</span>
                                            <span class="small d-block mt-1"
                                                th:text="${chapter.lessons.size() + ' lecture' + (chapter.lessons.size() > 1 ? 's' : '')}">(3
                                                Lectures)</span>
                                        </a>
                                    </h6>
                                    <div th:id="'collapse-' + ${interStat.index}" class="accordion-collapse collapse"
                                        th:classappend="${chapter.lessons.?[lessonId == __${currentLessonId}__].size() > 0} ? 'show' : ''"
                                        th:aria-labelledby="'heading-' + ${interStat.index}"
                                        data-bs-parent="#accordionExample2">
                                        <div class="accordion-body mt-3">
                                            <div class="vstack gap-3">

                                                <!-- Progress bar -->
                                                <div class="overflow-hidden">
                                                    <div class="d-flex justify-content-between">
                                                        <p class="mb-1 h6">1/3 Completed</p>
                                                        <h6 class="mb-1 text-end">30%</h6>
                                                    </div>
                                                    <div class="progress progress-sm bg-primary bg-opacity-10">
                                                        <div class="progress-bar bg-primary aos" role="progressbar"
                                                            data-aos="slide-right" data-aos-delay="200"
                                                            data-aos-duration="1000" data-aos-easing="ease-in-out"
                                                            style="width: 30%" aria-valuenow="30" aria-valuemin="0"
                                                            aria-valuemax="100">
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Course lecture -->
                                                <div th:each="lesson : ${chapter.lessons}"
                                                    th:classappend="${lesson.lessonId == currentLessonId} ? 'p-2 bg-success bg-opacity-10 rounded-3' : ''"
                                                    class="d-flex justify-content-between align-items-center mb-2">

                                                    <div class="position-relative d-flex align-items-center">

                                                        <!-- Nếu bài có thể truy cập (đã học hoặc có thể học) -->
                                                        <a th:if="${accessibleLessonIds.contains(lesson.lessonId)}"
                                                            th:href="@{/learning/course/{courseId}/lesson/{lessonId}(courseId=${course.courseId}, lessonId=${lesson.lessonId})}"
                                                            th:class="${lesson.lessonId == currentLessonId} ? 'btn btn-warning btn-round btn-sm mb-0 stretched-link position-static' :
                     (${completedLessonIds.contains(lesson.lessonId)} ? 'btn btn-success btn-round btn-sm mb-0 stretched-link position-static' : 'btn btn-primary btn-round btn-sm mb-0 stretched-link position-static')">
                                                            <i
                                                                th:class="${lesson.lessonId == currentLessonId} ? 'fas fa-play me-0' :
                         (${completedLessonIds.contains(lesson.lessonId)} ? 'fas fa-check me-0' : 'fas fa-play me-0')"></i>
                                                        </a>

                                                        <!-- Nếu bài bị khóa -->
                                                        <button
                                                            th:if="${!accessibleLessonIds.contains(lesson.lessonId)}"
                                                            class="btn btn-secondary btn-round btn-sm mb-0 position-static"
                                                            disabled>
                                                            <i class="fas fa-lock me-0"></i>
                                                        </button>

                                                        <!-- Tiêu đề bài -->
                                                        <span style="margin-left: 10px;"
                                                            class="d-inline-block text-truncate ms-2 mb-0 h6 fw-light w-200px"
                                                            th:class="${lesson.lessonId == currentLessonId} ? 'fw-bold' : 'fw-light'"
                                                            th:text="${lesson.title}">Tên bài học</span>
                                                    </div>

                                                    <div class="text-end">
                                                        <!-- Hiển thị trạng thái -->
                                                        <p class="mb-0 text-truncate"
                                                            th:if="${lesson.lessonId == currentLessonId}">
                                                            <span class="badge bg-warning text-dark">
                                                                <i class="fas fa-play me-1"></i>Playing
                                                            </span>
                                                        </p>
                                                        <p class="mb-0 text-truncate"
                                                            th:if="${completedLessonIds.contains(lesson.lessonId) and lesson.lessonId != currentLessonId}">
                                                            <span class="badge bg-success">
                                                                <i class="fas fa-check me-1"></i>Completed
                                                            </span>
                                                        </p>
                                                        <p class="mb-0 text-truncate"
                                                            th:if="${!completedLessonIds.contains(lesson.lessonId) and lesson.lessonId != currentLessonId and accessibleLessonIds.contains(lesson.lessonId)}">
                                                            <span class="text-primary fw-bold">
                                                                <i class="fas fa-clock me-1"></i>
                                                                <span th:text="${lesson.duration / 60} + ' min'"></span>
                                                            </span>
                                                        </p>
                                                        <p class="mb-0 text-truncate"
                                                            th:if="${!accessibleLessonIds.contains(lesson.lessonId)}">
                                                            <span class="text-muted">
                                                                <i class="fas fa-lock me-1"></i>
                                                                <span th:text="${lesson.duration / 60} + ' min'"></span>
                                                            </span>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Accordion END -->
                        </div>
                    </div>
                </div>
                <!-- Responsive offcanvas body END -->

                <!-- Tags START -->
                <div class="mt-4">
                    <h4 class="mb-3">Tags</h4>
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item"><a class="btn btn-outline-light btn-sm" href="#">blog</a></li>
                        <li class="list-inline-item"><a class="btn btn-outline-light btn-sm" href="#">business</a>
                        </li>
                        <li class="list-inline-item"><a class="btn btn-outline-light btn-sm" href="#">theme</a></li>
                        <li class="list-inline-item"><a class="btn btn-outline-light btn-sm" href="#">bootstrap</a>
                        </li>
                        <li class="list-inline-item"><a class="btn btn-outline-light btn-sm" href="#">data
                                science</a></li>
                        <li class="list-inline-item"><a class="btn btn-outline-light btn-sm" href="#">web
                                development</a></li>
                        <li class="list-inline-item"><a class="btn btn-outline-light btn-sm" href="#">tips</a></li>
                        <li class="list-inline-item"><a class="btn btn-outline-light btn-sm" href="#">machine
                                learning</a></li>
                    </ul>
                </div>
                <!-- Tags END -->
            </div>
            <!-- Right sidebar END -->

        </div>
        <!-- =======================
        Page banner video END -->

        <!-- =======================
        Page content START -->



        <!-- =======================
        Page content END -->

</main>

<!-- JavaScript for comment functionality -->
<script th:inline="javascript">
    // Add comment
    document.getElementById('commentForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const formData = new FormData(this);
        const comment = formData.get('comment');
        const courseId = formData.get('courseId');
        
        fetch(`/api/course/${courseId}/comment`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                comment: comment,
                courseId: courseId
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showMessage('Comment posted successfully!', 'success');
                this.reset();
                // Reload page to show new comment
                setTimeout(() => location.reload(), 1000);
            } else {
                showMessage(data.error || 'Error posting comment', 'error');
            }
        })
        .catch(error => {
            showMessage('Error posting comment', 'error');
        });
    });

    // Reply to comment
    function replyToComment(commentId) {
        const replyForm = document.getElementById('replyForm' + commentId);
        replyForm.style.display = 'block';
    }

    function cancelReply(commentId) {
        const replyForm = document.getElementById('replyForm' + commentId);
        replyForm.style.display = 'none';
        replyForm.querySelector('textarea').value = '';
    }

    // Edit comment
    function editComment(commentId) {
        const editForm = document.getElementById('editForm' + commentId);
        editForm.style.display = 'block';
    }

    function cancelEdit(commentId) {
        const editForm = document.getElementById('editForm' + commentId);
        editForm.style.display = 'none';
    }

    // Delete comment
    function deleteComment(commentId) {
        if (confirm('Are you sure you want to delete this comment?')) {
            const courseId = document.querySelector('input[name="courseId"]').value;
            
            fetch(`/api/course/${courseId}/comment/${commentId}/delete`, {
                method: 'DELETE'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showMessage('Comment deleted successfully!', 'success');
                    setTimeout(() => location.reload(), 1000);
                } else {
                    showMessage(data.error || 'Error deleting comment', 'error');
                }
            })
            .catch(error => {
                showMessage('Error deleting comment', 'error');
            });
        }
    }

    // Report comment
    function reportComment(commentId) {
        const reason = prompt('Please provide a reason for reporting this comment:');
        if (reason && reason.trim()) {
            const courseId = document.querySelector('input[name="courseId"]').value;
            
            fetch(`/api/course/${courseId}/comment/${commentId}/report`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    reason: reason.trim()
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showMessage('Comment reported successfully!', 'success');
                } else {
                    showMessage(data.error || 'Error reporting comment', 'error');
                }
            })
            .catch(error => {
                showMessage('Error reporting comment', 'error');
            });
        }
    }

    // Handle reply form submission
    document.addEventListener('submit', function(e) {
        if (e.target.classList.contains('replyCommentForm')) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const comment = formData.get('comment');
            const courseId = formData.get('courseId');
            const parentId = formData.get('parentId');
            
            fetch(`/api/course/${courseId}/comment/reply`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    comment: comment,
                    courseId: courseId,
                    parentId: parentId
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showMessage('Reply posted successfully!', 'success');
                    setTimeout(() => location.reload(), 1000);
                } else {
                    showMessage(data.error || 'Error posting reply', 'error');
                }
            })
            .catch(error => {
                showMessage('Error posting reply', 'error');
            });
        }
    });

    // Handle edit form submission
    document.addEventListener('submit', function(e) {
        if (e.target.classList.contains('editCommentForm')) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const comment = formData.get('comment');
            const courseId = formData.get('courseId');
            const commentId = e.target.dataset.commentId;
            
            fetch(`/api/course/${courseId}/comment/${commentId}/edit`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    comment: comment,
                    courseId: courseId
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showMessage('Comment updated successfully!', 'success');
                    setTimeout(() => location.reload(), 1000);
                } else {
                    showMessage(data.error || 'Error updating comment', 'error');
                }
            })
            .catch(error => {
                showMessage('Error updating comment', 'error');
            });
        }
    });

    // Show message function
    function showMessage(message, type) {
        const messageDiv = document.getElementById('commentMessage');
        messageDiv.innerHTML = `<div class="alert alert-${type === 'success' ? 'success' : 'danger'} alert-dismissible fade show" role="alert">
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>`;
        
        // Auto hide after 5 seconds
        setTimeout(() => {
            messageDiv.innerHTML = '';
        }, 5000);
    }
</script>