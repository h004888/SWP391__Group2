<style>
    .progress {
        background-color: #e9ecef !important;
    }
    .progress-bar.bg-primary {
        background-color: #1976d2 !important;
    }
    .table thead th, .table thead td {
        background: #23272b !important;
        color: #fff !important;
        border: none;
    }
    .table thead tr th:first-child {
        border-top-left-radius: 8px;
        border-bottom-left-radius: 8px;
    }
    .table thead tr th:last-child {
        border-top-right-radius: 8px;
        border-bottom-right-radius: 8px;
    }
</style>
<div th:fragment="myCourseContent">
<section class="pt-0">
  <div class="container-fluid px-0">
    <div class="card bg-blue h-100px h-md-200px rounded-0" style="background:url('/assets/images/pattern/04.png') no-repeat center center; background-size:cover;"></div>
  </div>
  <div class="container mt-n4">
    <div class="row">
      <div class="col-12">
        <div class="card bg-transparent card-body pb-0 px-0 mt-2 mt-sm-0">
          <div class="row d-sm-flex justify-sm-content-between mt-2 mt-md-0">
            <!-- Avatar + Info (optional, can be included if needed) -->
          </div>
        </div>
        <hr class="d-xl-none">
      </div>
    </div>
  </div>
</section>
<section class="pt-0">
  <div class="container">
    <div class="row">
      <!-- Sidebar -->
      <div class="col-xl-3">
        <div th:replace="~{homePage/fragments/profileSidebarFragment :: profileSidebar}"></div>
      </div>
      <!-- Main content -->
      <div class="col-xl-9">
        <!-- Counter boxes -->

        <!-- Card chứa bảng -->
        <div class="card bg-transparent border rounded-3">
          <div class="card-header bg-transparent border-bottom">
            <h3 class="mb-0">My Courses List</h3>
          </div>
          <div class="card-body">
            <!-- Search/filter -->
            <div class="row g-3 align-items-center justify-content-between mb-4">
              <div class="col-md-8">
                <form class="rounded position-relative" th:action="@{/learning/my-courses}" method="get">
                  <input class="form-control pe-5 bg-transparent" type="search" placeholder="Search" name="search" th:value="${search}">
                  <button class="bg-transparent p-2 position-absolute top-50 end-0 translate-middle-y border-0 text-primary-hover text-reset" type="submit">
                    <i class="fas fa-search fs-6 "></i>
                  </button>
                </form>
              </div>
              <div class="col-md-3">
                <form>
                  <select class="form-select js-choice border-0 z-index-9 bg-transparent" name="filter">
                    <option value="" th:selected="${filter == null or filter == ''}">Tất cả</option>
                    <option value="completed" th:selected="${filter == 'completed'}">Đã hoàn thành</option>
                    <option value="incomplete" th:selected="${filter == 'incomplete'}">Chưa hoàn thành</option>
                  </select>
                </form>
              </div>
            </div>
            <!-- Table -->
            <div class="table-responsive border-0">
              <table class="table table-dark-gray align-middle p-4 mb-0 table-hover">
                <thead>
                  <tr>
                    <th class="border-0 rounded-start">Course Title</th>
                    <th class="border-0">Total Lectures</th>
                    <th class="border-0">Completed Lecture</th>
                    <th class="border-0 rounded-end">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr th:each="course : ${courses}">
                    <td>
                      <div class="d-flex align-items-center">
                        <div class="w-100px">
                          <img th:src="${course.courseImg}" class="rounded" alt="Course" style="width:60px;height:40px;object-fit:cover;">
                        </div>
                        <div class="mb-0 ms-2">
                          <h6><a th:href="@{/learning/course/view(courseId=${course.courseId})}" th:text="${course.title}"></a></h6>
                          <div class="overflow-hidden">
                            <h6 class="mb-0 text-end" th:text="${courseProgressMap[course.courseId]} + '%'">0%</h6>
                            <div class="progress progress-sm bg-primary bg-opacity-10">
                              <div class="progress-bar bg-primary" th:style="'width:' + ${courseProgressMap[course.courseId]} + '%'" role="progressbar"></div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </td>
                    <td th:text="${totalLecturesMap[course.courseId]}"></td>
                    <td th:text="${completedLecturesMap[course.courseId]}"></td>
                    <td>
                      <a th:href="@{/learning/course/view(courseId=${course.courseId})}" class="btn btn-sm btn-primary-soft me-1 mb-1 mb-md-0"><i class="bi bi-play-circle me-1"></i>Continue</a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <!-- Pagination -->
            <div th:if="${totalPages != null and totalPages > 1}" class="d-sm-flex justify-content-sm-between align-items-sm-center mt-4 mt-sm-3">
              <p class="mb-0 text-center text-sm-start">Showing <span th:text="${currentPage * pageSize + 1}"></span> to <span th:text="${(currentPage + 1) * pageSize > totalElements ? totalElements : (currentPage + 1) * pageSize}"></span> of <span th:text="${totalElements}"></span> entries</p>
              <nav class="d-flex justify-content-center mb-0" aria-label="navigation">
                <ul class="pagination pagination-sm pagination-primary-soft d-inline-block d-md-flex rounded mb-0">
                  <li class="page-item mb-0" th:classappend="${currentPage == 1} ? 'disabled' : ''">
                    <a class="page-link" th:href="@{/learning/my-courses(page=${currentPage - 1}, search=${search}, filter=${filter})}" tabindex="-1"><i class="fas fa-angle-left"></i></a>
                  </li>
                  <li class="page-item mb-0" th:each="i : ${#numbers.sequence(1, totalPages)}" th:classappend="${i == currentPage} ? 'active' : ''">
                    <a class="page-link" th:href="@{/learning/my-courses(page=${i}, search=${search}, filter=${filter})}" th:text="${i}"></a>
                  </li>
                  <li class="page-item mb-0" th:classappend="${currentPage == totalPages} ? 'disabled' : ''">
                    <a class="page-link" th:href="@{/learning/my-courses(page=${currentPage + 1}, search=${search}, filter=${filter})}"><i class="fas fa-angle-right"></i></a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
</div>