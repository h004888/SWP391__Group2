<div th:fragment="editProfile">
<section class="pt-0">
  <div class="container-fluid px-0">
    <div class="card bg-blue h-100px h-md-200px rounded-0" style="background:url('/assets/images/pattern/04.png') no-repeat center center; background-size:cover;"></div>
  </div>
  <div class="container mt-n4">
    <div class="row">
      <div class="col-12">
        <div class="card bg-transparent card-body pb-0 px-0 mt-2 mt-sm-0">
          <div class="row d-sm-flex justify-sm-content-between mt-2 mt-md-0">
            <!-- Avatar -->
            <div class="col-auto">
              <div class="avatar avatar-xxl position-relative mt-n3">
                <img class="avatar-img rounded-circle border border-white border-3 shadow" th:src="${profile.avatarUrl != null ? profile.avatarUrl : '/assets/images/avatar/01.jpg'}" alt="Avatar">
                <span class="badge text-bg-success rounded-pill position-absolute top-50 start-100 translate-middle mt-4 mt-md-5 ms-n3 px-md-3">Pro</span>
              </div>
            </div>
            <!-- Profile info -->
            <div class="col d-sm-flex justify-content-between align-items-center">
              <!-- <div>
                <h1 class="my-1 fs-4" th:text="${profile.fullName}">User Name</h1>
                <ul class="list-inline mb-0">
                  <li class="list-inline-item me-3 mb-1 mb-sm-0">
                    <span class="h6" th:text="${profile.points}">0</span>
                    <span class="text-body fw-light">points</span>
                  </li>
                  <li class="list-inline-item me-3 mb-1 mb-sm-0">
                    <span class="h6" th:text="${profile.completedCourses}">0</span>
                    <span class="text-body fw-light">Completed courses</span>
                  </li>
                  <li class="list-inline-item me-3 mb-1 mb-sm-0">
                    <span class="h6" th:text="${profile.completedLessons}">0</span>
                    <span class="text-body fw-light">Completed lessons</span>
                  </li>
                </ul>
              </div> -->
              <div class="mt-2 mt-sm-0">
                <a th:href="@{/learning/my-courses}" class="btn btn-outline-primary mb-0">View my courses</a>
              </div>
            </div>
          </div>
        </div>
        <hr class="d-xl-none">
      </div>
    </div>
  </div>
</section>
<section class="pt-0">
  <div class="container">
    <div class="row">
      <div class="col-xl-3">
        <div th:replace="~{homePage/fragments/profileSidebarFragment :: profileSidebar}"></div>
      </div>
      <div class="col-xl-9">
        <div class="card shadow border-0 rounded-4 mx-auto" style="max-width: 900px;">
          <div class="card-body p-5">
            <h2 class="mb-4 text-center">Edit Profile</h2>
            <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">
              Cập nhật thông tin thành công!
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
              <span th:text="${error}"></span>
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <form th:action="@{/profile/edit}" th:object="${profile}" method="post" enctype="multipart/form-data">
              <div class="row mb-4 justify-content-center">
                <div class="col-md-4 text-center">
                  <img th:src="${profile.avatarUrl != null ? profile.avatarUrl : '/assets/images/avatar/01.jpg'}" alt="Avatar" class="rounded-circle shadow mb-3" style="width: 120px; height: 120px; object-fit: cover; border: 4px solid #fff;">
                  <div class="mb-2">
                    <input type="file" name="avatarFile" class="form-control" accept="image/*">
                  </div>
                </div>
                <div class="col-md-8">
                  <div class="row g-3">
                    <div class="col-md-6">
                      <label class="form-label">Full Name</label>
                      <input type="text" th:field="*{fullName}" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">Username</label>
                      <input type="text" th:field="*{username}" class="form-control" readonly>
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">Email</label>
                      <input type="email" th:field="*{email}" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">Phone</label>
                      <input type="text" th:field="*{phone}" class="form-control">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">Address</label>
                      <input type="text" th:field="*{address}" class="form-control">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">Personal Skill</label>
                      <input type="text" th:field="*{personalSkill}" class="form-control">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">Birthday</label>
                      <input type="date" th:field="*{birthDay}" class="form-control">
                    </div>
                  </div>
                </div>
              </div>
              <div class="text-center mt-4">
                <button type="submit" class="btn btn-success px-4 me-2"><i class="bi bi-save me-2"></i>Save</button>
                <button type="button" class="btn btn-secondary px-4" id="btn-cancel-edit">Cancel</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section> 
</div>